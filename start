#!/bin/bash

echo "🚀 Starting Resource Scheduler..."

# Kill any existing processes
echo "🔄 Cleaning up old processes..."
pkill -f "node index.js" 2>/dev/null
pkill -f "vite" 2>/dev/null

# Start backend
echo "🔧 Starting backend server..."
cd backend
npm install > /dev/null 2>&1
node index.js &
BACKEND_PID=$!
cd ..

# Wait for backend to start
sleep 3

# Start frontend
echo "🎨 Starting frontend..."
cd frontend
npm install > /dev/null 2>&1
npm run dev &
FRONTEND_PID=$!
cd ..

# Wait for frontend to start
sleep 5

echo ""
echo "✅ Resource Scheduler is starting up!"
echo ""
echo "🌐 Frontend: http://localhost:8081"
echo "🔧 Backend:  http://127.0.0.1:3001"
echo ""
echo "📋 Available features:"
echo "   • Calendar with drag & drop"
echo "   • Add holidays, vacations, allocations"
echo "   • Filter by employee, project, type"
echo "   • Search functionality"
echo ""
echo "Press Ctrl+C to stop all services"
echo ""

# Wait for user to stop
wait 